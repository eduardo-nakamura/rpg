<div class="container">
    <div class="row bg-header p-2 bg-warning">
        <h2>Dice Roller</h2>
    </div>

    <div class="row p-2 mt-3 ">
        <div class="col-12 col-sm text-center ">
            <div class="row">
                <div class="col-4 col-md " (click)="addDice(4)">
                    <img src="assets/d4.svg" title="D4" alt="D4">
                    <span class="badge badge-secondary">D4</span>
                </div>
                <div class="col-4 col-md " (click)="addDice(6)">
                    <img src="assets/d6.svg" title="D6" alt="D6">
                    <span class="badge badge-secondary">D6</span>
                </div>
                <div class="col-4 col-md " (click)="addDice(8)"> <img src="assets/d8.svg" title="D8" alt="D8">
                    <span class="badge badge-secondary">D8</span></div>
                <div class="col-4 col-md " (click)="addDice(10)">
                    <img src="assets/d10.svg" title="D10" alt="D10">
                    <span class="badge badge-secondary">D10</span>
                </div>
                <div class="col-4 col-md " (click)="addDice(12)">
                    <img src="assets/d12.svg" title="D12" alt="D12">
                    <span class="badge badge-secondary">D12</span>
                </div>
                <div class="col-4 col-md " (click)="addDice(20)">
                    <img src="assets/d20.svg" title="D20" alt="D20">
                    <span class="badge badge-secondary">D20</span>
                </div>
                <div class="col-4 col-md " (click)="addDice(100)">
                    <img src="assets/d100.svg" title="D100" alt="D100">
                    <span class="badge badge-secondary">D100</span>
                </div>
                <div class="col-4 col-md " (click)="customHide = !customHide">
                    <img src="assets/dcustom.svg" title="Custom" alt="Custom">
                    <span class="badge badge-secondary">Custom Dice</span>
                </div>
            </div>
        </div>        
        <div class=" col-12 col-sm-4 " *ngIf="customHide">
           <div class="row bg-warning pt-3 pb-3">
               <div class="col-12 text-light">
                <label class="col-4"> Quantidade: </label>
                <input class="col-8" type="number" min="0" [(ngModel)]="addThis.quantity">                
               </div>
               <div class="col-12 text-light">
                <label class="col-4"> Faces: </label>
                <input class="col-8" type="number" min="0" [(ngModel)]="addThis.side">                
               </div>
               <div class="col-12 text-light">                
                <label class="col-4"> Bonus: </label>
                <input class="col-8" type="number" min="0" [(ngModel)]="addThis.bonus">
               </div>
               <div class="col-12 text-light">                
                <button class="btn w-100 btn-danger" (click)="addDice(addThis.side,addThis.quantity,addThis.bonus)">
                    Adicionar Dado <i class="fas fa-plus"></i>
                </button>
               </div>
           </div>
        </div>
    </div>
    <!-- <div class="row p-2 mt-3 d-flex justify-content-center align-items-center text-light">
        <input type="number" min="0" [(ngModel)]="addThis.quantity">
        <label class="p-2"> dados de </label>
        <input type="number" min="0" [(ngModel)]="addThis.side">
        <label class="p-2"> Lados + </label>
        <input type="number" min="0" [(ngModel)]="addThis.bonus">
        <label class="p-2"> Bonus </label>
        <button class="btn btn-danger" (click)="addDice(addThis.side,addThis.quantity,addThis.bonus)"> + </button>
    </div> -->

    <!-- <div class="row p-2 d-flex justify-content-center align-items-center text-light" *ngFor="let item of dicesToRoll">
        <input type="number" min="0" [(ngModel)]="item.quantity">
        <label class="p-2"> dados de </label>
        <input type="number" min="0" [(ngModel)]="item.side">
        <label class="p-2"> Lados + </label>
        <input type="number" min="0" [(ngModel)]="item.bonus">
        <label class="p-2"> Bonus </label>
    </div> -->
    <!-- <div class="row">
        <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 w-100">
           
            <ng-container matColumnDef="quantity">
                <th mat-header-cell *matHeaderCellDef> No. </th>
                <td mat-cell *matCellDef="let element">
                    <input type="number" min="0" [(ngModel)]="element.quantity">
                </td>
            </ng-container>
           
            <ng-container matColumnDef="side">
                <th mat-header-cell *matHeaderCellDef> side </th>
                <td mat-cell *matCellDef="let element">
                    <input type="number" min="0" [(ngModel)]="element.side">
                </td>
            </ng-container>

         
            <ng-container matColumnDef="bonus">
                <th mat-header-cell *matHeaderCellDef> bonus </th>
                <td mat-cell *matCellDef="let element">
                    <input type="number" min="0" [(ngModel)]="element.bonus">
                </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    </div>
</div> -->



<div class="w-100 text-light p-2" >  
    <div class="row" *ngFor="let item of dicesToRoll; index as i">
        <div class="col-1 ">
            <label class="bg-warning p-2 text-dark">{{i+1}}</label>
        </div>
        <div class="col ">
            <label class="w-50" for="inputEmail4">Quantidade: </label>
            <input class="w-50" type="number" min="0" [(ngModel)]="item.quantity">
        </div>
        <div class="col">
            <label class="w-50" for="inputEmail4">Faces: </label>
          <input class="w-50" type="number" min="0" [(ngModel)]="item.side">
        </div>
        <div class="col">
            <label class="w-50" for="inputEmail4">Bonus: </label>
          <input class="w-50" type="number" min="0" [(ngModel)]="item.bonus">
        </div>
    </div>
  </div>

  <div class="row">

    <button class="btn col col-sm-3 m-2 btn-danger" (click)="rollDiceResults();tabGroup.selectedIndex=0">
        Rolar Dados <i class="fas fa-dice"></i>
    </button>
    <button class="btn col col-sm-3 m-2 btn-danger" (click)="resetHistory()">
        Limpar Histórico <i class="fas fa-backspace"></i>
    </button>
</div>


  <mat-tab-group class="bg-warning" #tabGroup>
    <mat-tab label="Resultado"> 
        <div class="row w-100 p-2">
            <div class="p-2 m-1 bg-danger " *ngFor="let item of diceResult; let i = index" title="{{item.results.join(' + ')}} + {{item.bonus}}">
                {{i+1}}) {{item.quantity}}d{{item.side}}{{item.bonus != 0 ? ' + ' + item.bonus : ''}}: {{item.results.join(" + ")}} + {{item.bonus}} = {{item.sum}}
            </div>
        </div>       
    
    </mat-tab>
    <mat-tab label="Histórico"> 
        <div class="row w-100 p-2">
            <div class="p-2 m-1 bg-danger " *ngFor="let item of diceHist; let i = index" title="{{item.results}} + {{item.bonus}}">
                {{i+1}}) {{item.quantity}}d{{item.side}}{{item.bonus != 0 ? ' + ' + item.bonus : ''}}: {{item.results}} + {{item.bonus}} = {{item.sum}}
            </div>
        </div>
    </mat-tab>
    
  </mat-tab-group>